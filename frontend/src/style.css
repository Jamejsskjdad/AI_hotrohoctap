:root { --p:#667eea; --s:#764ba2; }
*{box-sizing:border-box} body,html,#root{height:100%}
body{margin:0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,var(--p) 0%,var(--s) 100%)}
.wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:20px}
.card{background:#fff;max-width:900px;width:100%;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.3);padding:32px}
.header{ text-align:center;border-bottom:3px solid var(--p);padding-bottom:16px;margin-bottom:20px}
.header h1{color:var(--p);font-size:28px;margin:0 0 6px}
.header p{color:#666}
.upload{background:#f8f9ff;border:3px dashed var(--p);border-radius:15px;padding:28px;text-align:center;margin-bottom:18px;cursor:pointer}
.icon{font-size:42px;color:var(--p);margin-bottom:10px}
.preview{max-width:100%;max-height:300px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,.1);margin-top:14px}
.label{font-weight:600}
.hint{color:#999;font-size:14px}
.btns{display:flex;gap:12px;flex-wrap:wrap;margin:16px 0}
.btn{flex:1;min-width:160px;padding:12px 18px;border-radius:10px;border:none;background:#f5f5f5;cursor:pointer;font-weight:600}
.btn:hover{background:#e9e9e9}
.btn.primary{color:#fff;background:linear-gradient(135deg,var(--p) 0%,var(--s) 100%)}
.btn.primary:disabled{background:#bbb;cursor:not-allowed}
.box{background:#f8f9ff;border-radius:12px;padding:16px;margin:12px 0}
.subbox{background:#fff;border-radius:10px;padding:14px;box-shadow:0 2px 8px rgba(0,0,0,.05);margin:10px 0}
.title{color:var(--p);margin:0 0 8px;font-size:16px}
.title.warn{color:#ff9800}
.title.ok{color:var(--p)}
.pre{white-space:pre-wrap;line-height:1.6;color:#444;background:#fff;border-radius:8px;padding:12px}
.pre.green{background:#e8f5e9;border-left:4px solid #4caf50}
.math-block .katex-display { text-align: left; margin: 0; }
/* KaTeX: căn trái và bỏ margin mặc định của block display */
.math-block .katex-display { text-align: left; margin: 0; }

/* Cho chữ trong \text{...} được xuống dòng bình thường */
.math-block .katex .text { white-space: normal; }

/* Phòng trường hợp biểu thức quá rộng (ma trận, phân số dài) */
.math-block { overflow-x: auto; max-width: 100%; }
.math-block .katex { line-height: 1.6; }
.math-block .katex-display { 
  text-align: left; 
  margin: 0; 
  overflow-x: auto;     /* tránh tràn */
  white-space: normal;  /* cho phép xuống dòng khối text */
}
